
# Bloomberg ClusteredData Warehouse

This is used to analyze forex deals by accepting forex deals and saving it into a Database.


##  To run the project, you need Docker and a Java environment (JDK 19). Follow the steps below:
- Navigate to the project root directory using a terminal or command prompt.
- Run - Docker
```sh
docker-compose up
```

```shell
docker-compose up -d
``` 
or simply run if you have make installed. the application runs on port 7070

```
 make
```

- Run this command
```sh
 mvn clean spring-boot:run
```

## PROJECT DOCUMENTATION

#### Technology Used
- SPRINGBOOT
- POSTGRESQL
- DOCKER
- JUNIT
- SWAGGER

# Project Packages
#### Controller REST API Endpoints
- POST - http://localhost:5000/api/v1/forexDeals/create/and/save - The endpoint create and saves a unique forex deal to the Database
- GET - http://localhost:5000/api/v1/forexDeals/get/by/uniqueId/{{uniqueId}} - The endpoint Gets a forex deal by uniqueId from the Database
- GET - http://localhost:5000/api/v1/forexDeals/get/all -  The endpoint retrieves a list of all forexDeals from the Database with pagination

### Service and Implementations
- The business logic is in the serviceImpl package in the service package. The service class is an interface that implements the serviceImpl class.

#### Model
- id - autogenerated 
- dealUniqueId
- fromCurrencyISOCode - ISO Currency Code from the deal with Datatype: Currency
- toCurrencyISOCodeCode - ISO Currency Code to deal with Datatype: Currency
- dealTimeStamp - TimeStamp with Datatype: LocalDateTime
- dealAmount - Amount with Datatype: BigDecimal

#### Logging
- Logging used to log errors and info for the service clas.

TEST
- Unit test in the test package.

SWAGGER-UI-DOC
- After starting the application, enter `localhost:5000/swagger-ui/index.html` in your browser to access the swagger doc.

### Request payload to create and save a forex deal
```json
{
    "dealUniqueId": "1001",
    "fromCurrencyISOCode": "USD",
    "toCurrencyISOCode": "NGN",
    "dealAmount": 10000.0
}
```

### Successful Response to create and save ForexDeal
```json
{
    "message": "successful",
    "status": "OK",
    "data": {
        "dealUniqueId": "1001",
        "fromCurrencyISOCode": "USD",
        "toCurrencyISOCode": "NGN",
        "dealTimeStamp": "2023-07-11T20:27:02.009214",
        "dealAmount": 10000.0
    }
}
```

### Successful Response to get a forex deal by uniqueId
```json
{
    "message": "successful",
    "status": "OK",
    "data": {
        "dealUniqueId": "1001",
        "fromCurrencyISOCode": "USD",
        "toCurrencyISOCode": "NGN",
        "dealTimeStamp": "2023-07-11T20:27:02.009214",
        "dealAmount": 10000.00
    }
}
```

### Error Response received for saving an existing forex deal
```json
{
  "message": "error",
  "status": "BAD_REQUEST",
  "data": "Forex Deal with this id already exists"
}
```

### Error Response received for Invalid Currency ISO Code
```json
{
  "message": "error",
  "status": "BAD_REQUEST",
  "data": "Invalid Currency ISO Code"
}
```

### Error Response received for Forex Deal Amount less than or equal to 0 
```json
{
  "message": "error",
  "status": "BAD_REQUEST",
  "data": "Invalid deal amount, amount most be greater than zero"
}
```

### Successful Response To retrieve All ForexDeals with pagination
```json
{
  "message": "successful",
  "status": "OK",
  "data": {
    "contents": [
      {
        "dealUniqueId": "1001",
        "fromCurrencyISOCode": "USD",
        "toCurrencyISOCode": "NGN",
        "dealTimeStamp": "2023-07-11T16:42:04.35729",
        "dealAmount": 10000.00
      },
      {
        "dealUniqueId": "1002",
        "fromCurrencyISOCode": "GBP",
        "toCurrencyISOCode": "NGN",
        "dealTimeStamp": "2023-07-11T16:42:09.587207",
        "dealAmount": 20000.00
      },
      {
        "dealUniqueId": "1003",
        "fromCurrencyISOCode": "EUR",
        "toCurrencyISOCode": "NGN",
        "dealTimeStamp": "2023-07-11T16:42:12.952732",
        "dealAmount": 30000.00
      }
    ],
    "pageNumber": 3,
    "pageSize": 10
  }
}
```


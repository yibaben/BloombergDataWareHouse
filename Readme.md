
# ClusteredData Warehouse

This is to analyze fx deals by accepting deals and persisting in the DB.


##  Run - Docker
```sh
docker-compose up
```

## Project Run
#### How to run the project
- To run the project you need docker and a java environment (19). Navigate to the project root and run
- ```shell
    docker-compose up -d
``` 
or simply run if you have make installed. the application runs on port 7070

```
 make
```

- Run this command
```sh
 mvn clean spring-boot:run
```

## PROJECT DOCUMENTATION

#### Technology Used
- SPRINGBOOT
- POSTGRES
- DOCKER

# Project Packages
#### Resource
- POST - /api/v1/fxDeals - The endpoint saves the fx deal to the DB
- GET - /api/v1/fxDeals/{{dealId}} - The endpoint Get an fx deal by id retrieves a list of fxDeals from the DB
- GET - /api/v1/fxDeals -  The endpoint retrieves a list of fxDeals from the DB with pagination

### Service and Impl
- The business logic is in the serviceImpl package in the service package. The service class is an interface that implements the serviceImpl class.

#### Model
- id - autogenerated 
- dealUniqueId
- fromCurrencyISOCode - ISO Currency Code from the deal with Datatype: Currency
- toCurrencyISOCodeCode - ISO Currency Code to deal with Datatype: Currency
- dealTimeStamp - TimeStamp with Datatype: LocalDateTime
- dealAmount - Amount with Datatype: BigDecimal

#### Logging
- Logging used to log errors and info for the service clas.

### Request body to save a deal
{
    "dealUniqueId": "01",
    "fromCurrencyISOCode": "USD",
    "toCurrencyISOCode": "NGN",
    "dealAmount": 10000.0
}

### Success Response to save FxDeal
```json
{
    "message": "successful",
    "status": "OK",
    "data": {
        "dealUniqueId": "01",
        "fromCurrencyISOCode": "USD",
        "toCurrencyISOCode": "NGN",
        "dealTimeStamp": "2023-07-11T20:27:02.009214",
        "dealAmount": 10000.0
    }
}
```

### Success Response to get a deal by Id
```json
{
    "message": "successful",
    "status": "OK",
    "data": {
        "dealUniqueId": "01",
        "fromCurrencyISOCode": "USD",
        "toCurrencyISOCode": "NGN",
        "dealTimeStamp": "2023-07-11T20:27:02.009214",
        "dealAmount": 10000.00
    }
}
```

### Error Response received for saving an existing deal
```json
{
    "message": "error",
    "status": "BAD_REQUEST",
    "data": "Deal with this id already exist"
}
```

```json --- To retrieve FxDeals
{
  "message": "successful",
  "status": "OK",
  "data": {
    "contents": [
      {
        "dealUniqueId": "114",
        "fromCurrencyISOCode": "USD",
        "toCurrencyISOCode": "NGN",
        "dealTimeStamp": "2023-07-11T16:42:04.35729",
        "dealAmount": 90.00
      },
      {
        "dealUniqueId": "111",
        "fromCurrencyISOCode": "USD",
        "toCurrencyISOCode": "NGN",
        "dealTimeStamp": "2023-07-11T16:42:09.587207",
        "dealAmount": 90.00
      },
      {
        "dealUniqueId": "1131",
        "fromCurrencyISOCode": "USD",
        "toCurrencyISOCode": "NGN",
        "dealTimeStamp": "2023-07-11T16:42:12.952732",
        "dealAmount": 90.00
      }
    ],
    "pageNumber": 3,
    "pageSize": 10
  }
}
```
TEST
- Unit test in the test package. 
